extends layout.pug

block scripts
  script(src="/js/photos.js")
  if allowDownload
    script.
      const downloadButton = document.getElementById("download");
      downloadButton.addEventListener("click", () => {
        const url = lightboxImg.style.backgroundImage.replace(/url\("(.+)"\)/, "$1");
        const name = url.replace(/.+_(.+)\.\w+/, "$1");
        downloadButton.download = name;
        downloadButton.href = url;
      });

block content
  ul(id="gallery")
  #sentinel
  #lightbox(style="display:none;")
    #lightbox-img
    if allowDownload
      a#download download